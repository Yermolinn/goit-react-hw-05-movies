"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[387],{3387:function(e,t,n){n.r(t),n.d(t,{default:function(){return Z}});var r,a,o=n(7689),i=n(2791),s=n(622),c=n(5856),u=n(977),l=n(7178),d=n(3135),h=n(168),p=n(82),f=p.ZP.ul(r||(r=(0,h.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  gap: 36px;\n  opacity: 0;\n  transition: opacity 1500ms;\n  &.loaded {\n    opacity: 1;\n  }\n"]))),v=p.ZP.li(a||(a=(0,h.Z)(["\n  max-width: 180px;\n  list-style: none;\n"]))),g=n(5667),m=n(184),Z=function(){var e=(0,l.Z)(),t=e.cast,n=e.fetchCast,r=e.contentIsLoading,a=e.setContentIsLoading,h=e.status,p=(0,o.UO)().moviesId,Z=(0,i.useRef)(n).current;(0,i.useEffect)((function(){var e=new AbortController;return Z({fetchParams:"movie/".concat(p,"/credits"),controller:e}),g.NY.scrollMore(500),function(){e.abort()}}),[Z,p]);var w=(0,c.e4)(t.length,(function(){a(!1)}));return(0,m.jsxs)(m.Fragment,{children:[r&&(0,m.jsx)(u.Z,{column:6,height:270,width:180}),h===d.Z.resolved&&!!t.length&&(0,m.jsx)(f,{className:!r&&"loaded",children:t.map((function(e){var t=e.id,n=e.name,r=e.original_name,a=e.character,o=e.profile;return(0,m.jsxs)(v,{children:[(0,m.jsx)("img",{src:o,alt:n,width:"180",height:"270",onLoad:w,onError:w}),(0,m.jsx)("p",{children:r}),(0,m.jsxs)("p",{children:["Character: ",a]})]},t)}))}),(0,m.jsx)(s.Z,{})]})}},977:function(e,t,n){var r=n(8175),a=n(184);t.Z=function(e){var t=e.column,n=void 0===t?4:t,o=e.height,i=void 0===o?450:o,s=e.width,c=n,u=i,l=void 0===s?300:s,d=u+10,h=l+10,p=Array(3*c).fill(1);return(0,a.jsx)(r.ZP,{speed:1,width:c*h,height:3*d,children:p.map((function(e,t){var n=Math.floor(t/c)*d+35,r=t*h%(c*h);return(0,a.jsx)("rect",{x:r,y:n,rx:"0",ry:"0",width:l,height:u},t)}))})}},622:function(e,t,n){var r=n(5218),a=n(184);t.Z=function(){return(0,a.jsx)(r.x7,{position:"top-center",reverseOrder:!1})}},3135:function(e,t){t.Z={idle:"IDLE",pending:"PENDING",resolved:"RESOLVED",error:"ERROR"}},7178:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(9439),a=n(2791),o=n(5861),i=n(4687),s=n.n(i),c=n(1243);c.Z.defaults.baseURL="https://api.themoviedb.org/3/";var u=function(){var e=(0,o.Z)(s().mark((function e(t){var n,r,a,o,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fetchParams,r=t.query,a=void 0===r?null:r,o=t.controller,e.next=3,(0,c.Z)(n,{signal:o.signal,params:{api_key:"c37d4b7e60468bc94e880299c0a50c58",query:a}});case 3:return i=e.sent,e.abrupt("return",i.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=n(3135),d=n(5218),h=function(){var e=(0,a.useState)([]),t=(0,r.Z)(e,2),n=t[0],o=t[1],i=(0,a.useState)(null),s=(0,r.Z)(i,2),c=s[0],h=s[1],p=(0,a.useState)([]),f=(0,r.Z)(p,2),v=f[0],g=f[1],m=(0,a.useState)([]),Z=(0,r.Z)(m,2),w=Z[0],x=Z[1],_=(0,a.useState)(!1),y=(0,r.Z)(_,2),b=y[0],j=y[1],P=(0,a.useState)(l.Z.idle),L=(0,r.Z)(P,2),k=L[0],C=L[1];return{movies:n,fetchMoviesList:function(e){C(l.Z.pending),j(!0),u(e).then((function(e){if(0===e.results.length)return C(l.Z.resolved),j(!1),d.ZP.error("Nothing found!");var t=function(e){return e.map((function(e){var t=e.title,n=e.id,r=e.poster_path,a=e.vote_average;return{title:t,id:n,poster:r?"https://image.tmdb.org/t/p/w500/".concat(r):"https://placehold.co/500x750/png",averageVote:a&&Math.round(10*a)}}))}(e.results);o(t),C(l.Z.resolved)})).catch((function(e){"canceled"!==e.message&&(C(l.Z.error),j(!1),d.ZP.error(e.message))}))},movie:c,fetchMovie:function(e){C(l.Z.pending),j(!0),u(e).then((function(e){h(function(e){var t=e.release_date,n=e.title,r=e.poster_path,a=e.popularity,o=e.backdrop_path,i=e.id,s=e.tagline,c=e.genres,u=e.overview,l=t?t.split("-")[0]:"No release information",d=r?"https://image.tmdb.org/t/p/w500/".concat(r):"https://placehold.co/500x750/png",h=c.map((function(e){return e.name})).join(" ");return{date:l,title:n,tagline:s,id:i,poster:d,popularity:a+"",backdrop_path:o,genre:h.length?h:"No genre information",overview:u}}(e)),C(l.Z.resolved)})).catch((function(e){"canceled"!==e.message&&(C(l.Z.error),j(!1),d.ZP.error(e.message))}))},cast:v,fetchCast:function(e){C(l.Z.pending),j(!0),u(e).then((function(e){if(0===e.cast.length)return C(l.Z.resolved),j(!1),d.ZP.error("We don't have any cast for this movie");g(function(e){return e.map((function(e){var t=e.id,n=e.name,r=e.original_name,a=e.character,o=e.profile_path;return{id:t,name:n,original_name:r,character:a,profile:o?"https://image.tmdb.org/t/p/w500/".concat(o):"https://placehold.co/80x100/png"}}))}(e.cast)),C(l.Z.resolved)})).catch((function(e){"canceled"!==e.message&&(C(l.Z.error),j(!1),d.ZP.error(e.message))}))},reviews:w,fetcReviews:function(e){C(l.Z.pending),j(!0),u(e).then((function(e){if(0===e.results.length)return j(!1),C(l.Z.resolved),d.ZP.error("We don't have any reviews for this movie");x(function(e){return e.map((function(e){var t=e.author,n=e.author_details.avatar_path;return{author:t,content:e.content,id:e.id,avatar:!n||null!==n&&void 0!==n&&n.includes("https")?"https://placehold.co/80x80/png":"https://image.tmdb.org/t/p/w500/".concat(n)}}))}(e.results)),C(l.Z.resolved)})).catch((function(e){"canceled"!==e.message&&(j(!1),C(l.Z.error),d.ZP.error(e.message))}))},contentIsLoading:b,setContentIsLoading:j,status:k,setStatus:C}}}}]);
//# sourceMappingURL=387.428615e5.chunk.js.map