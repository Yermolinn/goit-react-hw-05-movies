"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[157],{622:function(e,n,t){var r=t(5218),o=t(184);n.Z=function(){return(0,o.jsx)(r.x7,{position:"top-center",reverseOrder:!1})}},1157:function(e,n,t){t.r(n),t.d(n,{default:function(){return L}});var r,o,i,a,s,c,l=t(2791),d=t(7689),u=t(168),p=t(82),h=t(1087),f=p.ZP.div(r||(r=(0,u.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  gap: 20px;\n  padding: 40px 15px;\n  opacity: 0;\n  transition: opacity 1500ms;\n  &.loaded {\n    opacity: 1;\n  }\n"]))),v=p.ZP.div(o||(o=(0,u.Z)(["\n  display: flex;\n  gap: 10px;\n"]))),g=p.ZP.ul(i||(i=(0,u.Z)(["\n  display: flex;\n  gap: 20px;\n"]))),m=(0,p.ZP)(h.rU)(a||(a=(0,u.Z)(["\n  width: 100px;\n  margin: 0;\n  text-align: center;\n  font-weight: 600;\n  color: black;\n  /* padding: 4px 8px; */\n  border: none;\n  border-radius: 5px;\n  outline: none;\n  cursor: pointer;\n  &:hover,\n  &:focus {\n    color: orangered;\n  }\n"]))),Z=p.ZP.li(s||(s=(0,u.Z)(["\nlist-style: none;\n"]))),x=p.ZP.h2(c||(c=(0,u.Z)(["\nmargin-top: 20px;\n\n"]))),j=t(184),w=function(e){var n,t,r=e.movie,o=e.setContentIsLoading,i=e.contentIsLoading,a=r.date,s=r.title,c=r.tagline,u=r.poster,p=r.popularity,h=r.genre,w=r.overview,_=(0,d.TH)(),b=(0,l.useRef)(null!==(n=null===(t=_.state)||void 0===t?void 0:t.from)&&void 0!==n?n:"/"),y=function(){return o(!1)};return(0,j.jsxs)(f,{className:!i&&"loaded",children:[(0,j.jsx)(m,{to:b.current,children:"Go back"}),(0,j.jsxs)(v,{children:[(0,j.jsx)("img",{src:u,alt:c,onLoad:y,onError:y,width:"400",height:"600"}),(0,j.jsxs)("div",{children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("h1",{children:s}),(0,j.jsx)("p",{children:"".concat(a)})]}),(0,j.jsxs)("p",{children:["Popularity: ",p]}),(0,j.jsx)("h2",{children:"Overview"}),(0,j.jsx)("p",{children:w}),(0,j.jsx)("h2",{children:"Genres"}),(0,j.jsx)("p",{children:h})]})]}),(0,j.jsx)(x,{children:"Additional information"}),(0,j.jsxs)(g,{children:[(0,j.jsx)(Z,{children:(0,j.jsx)(m,{to:"cast",children:"Cast"})}),(0,j.jsx)(Z,{children:(0,j.jsx)(m,{to:"reviews",children:"Reviews"})})]}),(0,j.jsx)(l.Suspense,{children:(0,j.jsx)(d.j3,{})})]})},_=t(622),b=t(9245),y=t(7178),P=t(3135),L=function(){var e=(0,y.Z)(),n=e.movie,t=e.fetchMovie,r=e.status,o=e.contentIsLoading,i=e.setContentIsLoading,a=(0,l.useRef)(t).current,s=(0,d.UO)().moviesId;return(0,l.useEffect)((function(){var e=new AbortController;return a({fetchParams:"movie/".concat(s),controller:e}),function(){e.abort()}}),[a,s]),(0,j.jsxs)(j.Fragment,{children:[o&&(0,j.jsx)(b.Z,{}),r===P.Z.resolved&&(0,j.jsx)(w,{movie:n,setContentIsLoading:i,contentIsLoading:o}),(0,j.jsx)(_.Z,{})]})}},3135:function(e,n){n.Z={idle:"IDLE",pending:"PENDING",resolved:"RESOLVED",error:"ERROR"}},7178:function(e,n,t){t.d(n,{Z:function(){return p}});var r=t(9439),o=t(2791),i=t(5861),a=t(4687),s=t.n(a),c=t(1243);c.Z.defaults.baseURL="https://api.themoviedb.org/3/";var l=function(){var e=(0,i.Z)(s().mark((function e(n){var t,r,o,i,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.fetchParams,r=n.query,o=void 0===r?null:r,i=n.controller,e.next=3,(0,c.Z)(t,{signal:i.signal,params:{api_key:"c37d4b7e60468bc94e880299c0a50c58",query:o}});case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),d=t(3135),u=t(5218),p=function(){var e=(0,o.useState)([]),n=(0,r.Z)(e,2),t=n[0],i=n[1],a=(0,o.useState)(null),s=(0,r.Z)(a,2),c=s[0],p=s[1],h=(0,o.useState)([]),f=(0,r.Z)(h,2),v=f[0],g=f[1],m=(0,o.useState)([]),Z=(0,r.Z)(m,2),x=Z[0],j=Z[1],w=(0,o.useState)(!1),_=(0,r.Z)(w,2),b=_[0],y=_[1],P=(0,o.useState)(d.Z.idle),L=(0,r.Z)(P,2),I=L[0],k=L[1];return{movies:t,fetchMoviesList:function(e){k(d.Z.pending),y(!0),l(e).then((function(e){if(0===e.results.length)return k(d.Z.resolved),y(!1),u.ZP.error("Nothing found!");var n=function(e){return e.map((function(e){var n=e.title,t=e.id,r=e.poster_path,o=e.vote_average;return{title:n,id:t,poster:r?"https://image.tmdb.org/t/p/w500/".concat(r):"https://placehold.co/500x750/png",averageVote:o&&Math.round(10*o)}}))}(e.results);i(n),k(d.Z.resolved)})).catch((function(e){"canceled"!==e.message&&(k(d.Z.error),y(!1),u.ZP.error(e.message))}))},movie:c,fetchMovie:function(e){k(d.Z.pending),y(!0),l(e).then((function(e){p(function(e){var n=e.release_date,t=e.title,r=e.poster_path,o=e.popularity,i=e.backdrop_path,a=e.id,s=e.tagline,c=e.genres,l=e.overview,d=n?n.split("-")[0]:"No release information",u=r?"https://image.tmdb.org/t/p/w500/".concat(r):"https://placehold.co/500x750/png",p=c.map((function(e){return e.name})).join(" ");return{date:d,title:t,tagline:s,id:a,poster:u,popularity:o+"",backdrop_path:i,genre:p.length?p:"No genre information",overview:l}}(e)),k(d.Z.resolved)})).catch((function(e){"canceled"!==e.message&&(k(d.Z.error),y(!1),u.ZP.error(e.message))}))},cast:v,fetchCast:function(e){k(d.Z.pending),y(!0),l(e).then((function(e){if(0===e.cast.length)return k(d.Z.resolved),y(!1),u.ZP.error("We don't have any cast for this movie");g(function(e){return e.map((function(e){var n=e.id,t=e.name,r=e.original_name,o=e.character,i=e.profile_path;return{id:n,name:t,original_name:r,character:o,profile:i?"https://image.tmdb.org/t/p/w500/".concat(i):"https://placehold.co/80x100/png"}}))}(e.cast)),k(d.Z.resolved)})).catch((function(e){"canceled"!==e.message&&(k(d.Z.error),y(!1),u.ZP.error(e.message))}))},reviews:x,fetcReviews:function(e){k(d.Z.pending),y(!0),l(e).then((function(e){if(0===e.results.length)return y(!1),k(d.Z.resolved),u.ZP.error("We don't have any reviews for this movie");j(function(e){return e.map((function(e){var n=e.author,t=e.author_details.avatar_path;return{author:n,content:e.content,id:e.id,avatar:!t||null!==t&&void 0!==t&&t.includes("https")?"https://placehold.co/80x80/png":"https://image.tmdb.org/t/p/w500/".concat(t)}}))}(e.results)),k(d.Z.resolved)})).catch((function(e){"canceled"!==e.message&&(y(!1),k(d.Z.error),u.ZP.error(e.message))}))},contentIsLoading:b,setContentIsLoading:y,status:I,setStatus:k}}}}]);
//# sourceMappingURL=157.9b43d77e.chunk.js.map