"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[307],{9307:function(e,t,r){r.r(t),r.d(t,{default:function(){return w}});var n,i,o=r(7689),a=r(2791),s=r(5856),c=r(622),h=r(1413),u=r(8175),d=r(184),l=function(e){return(0,d.jsxs)(u.ZP,(0,h.Z)((0,h.Z)({viewBox:"0 0 500 475",height:475,width:500},e),{},{children:[(0,d.jsx)("circle",{cx:"70.2",cy:"73.2",r:"41.3"}),(0,d.jsx)("rect",{x:"129.9",y:"29.5",width:"125.5",height:"17"}),(0,d.jsx)("rect",{x:"129.9",y:"64.7",width:"296",height:"17"}),(0,d.jsx)("rect",{x:"129.9",y:"97.8",width:"253.5",height:"17"}),(0,d.jsx)("rect",{x:"129.9",y:"132.3",width:"212.5",height:"17"}),(0,d.jsx)("circle",{cx:"70.7",cy:"243.5",r:"41.3"}),(0,d.jsx)("rect",{x:"130.4",y:"199.9",width:"125.5",height:"17"}),(0,d.jsx)("rect",{x:"130.4",y:"235",width:"296",height:"17"}),(0,d.jsx)("rect",{x:"130.4",y:"268.2",width:"253.5",height:"17"}),(0,d.jsx)("rect",{x:"130.4",y:"302.6",width:"212.5",height:"17"}),(0,d.jsx)("circle",{cx:"70.7",cy:"412.7",r:"41.3"}),(0,d.jsx)("rect",{x:"130.4",y:"369",width:"125.5",height:"17"}),(0,d.jsx)("rect",{x:"130.4",y:"404.2",width:"296",height:"17"}),(0,d.jsx)("rect",{x:"130.4",y:"437.3",width:"253.5",height:"17"}),(0,d.jsx)("rect",{x:"130.4",y:"471.8",width:"212.5",height:"17"})]}))},p=r(7178),g=r(3135),f=r(168),v=r(82),x=v.ZP.ul(n||(n=(0,f.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  opacity: 0;\n  gap: 40px;\n  transition: opacity 1500ms;\n  &.listLoaded {\n    opacity: 1;\n  }\n"]))),m=v.ZP.li(i||(i=(0,f.Z)(["\n  border-bottom: solid 1px gray;\n"]))),Z=r(5667),w=function(){var e=(0,p.Z)(),t=e.reviews,r=e.fetcReviews,n=e.contentIsLoading,i=e.setContentIsLoading,h=e.status,u=(0,o.UO)().moviesId,f=(0,a.useRef)(r).current;(0,a.useEffect)((function(){var e=new AbortController;return f({fetchParams:"movie/".concat(u,"/reviews"),controller:e}),Z.NY.scrollMore(500),function(){e.abort()}}),[f,u]);var v=(0,s.e4)(t.length,(function(){i(!1)}));return(0,d.jsxs)(d.Fragment,{children:[n&&(0,d.jsx)(l,{}),h===g.Z.resolved&&!!t.length&&(0,d.jsx)(x,{className:!n&&"listLoaded",children:t.map((function(e){var t=e.author,r=e.content,n=e.id,i=e.avatar;return(0,d.jsxs)(m,{children:[(0,d.jsx)("img",{src:i,alt:t,onLoad:v,onError:v,width:"80",height:"80"}),(0,d.jsxs)("h2",{children:["Author: ",t]}),(0,d.jsx)("p",{children:r})]},n)}))}),(0,d.jsx)(c.Z,{})]})}},622:function(e,t,r){var n=r(5218),i=r(184);t.Z=function(){return(0,i.jsx)(n.x7,{position:"top-center",reverseOrder:!1})}},3135:function(e,t){t.Z={idle:"IDLE",pending:"PENDING",resolved:"RESOLVED",error:"ERROR"}},7178:function(e,t,r){r.d(t,{Z:function(){return l}});var n=r(9439),i=r(2791),o=r(5861),a=r(4687),s=r.n(a),c=r(1243);c.Z.defaults.baseURL="https://api.themoviedb.org/3/";var h=function(){var e=(0,o.Z)(s().mark((function e(t){var r,n,i,o,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.fetchParams,n=t.query,i=void 0===n?null:n,o=t.controller,e.next=3,(0,c.Z)(r,{signal:o.signal,params:{api_key:"c37d4b7e60468bc94e880299c0a50c58",query:i}});case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=r(3135),d=r(5218),l=function(){var e=(0,i.useState)([]),t=(0,n.Z)(e,2),r=t[0],o=t[1],a=(0,i.useState)(null),s=(0,n.Z)(a,2),c=s[0],l=s[1],p=(0,i.useState)([]),g=(0,n.Z)(p,2),f=g[0],v=g[1],x=(0,i.useState)([]),m=(0,n.Z)(x,2),Z=m[0],w=m[1],y=(0,i.useState)(!1),j=(0,n.Z)(y,2),_=j[0],b=j[1],P=(0,i.useState)(u.Z.idle),L=(0,n.Z)(P,2),k=L[0],R=L[1];return{movies:r,fetchMoviesList:function(e){R(u.Z.pending),b(!0),h(e).then((function(e){if(0===e.results.length)return R(u.Z.resolved),b(!1),d.ZP.error("Nothing found!");var t=function(e){return e.map((function(e){var t=e.title,r=e.id,n=e.poster_path,i=e.vote_average;return{title:t,id:r,poster:n?"https://image.tmdb.org/t/p/w500/".concat(n):"https://placehold.co/500x750/png",averageVote:i&&Math.round(10*i)}}))}(e.results);o(t),R(u.Z.resolved)})).catch((function(e){"canceled"!==e.message&&(R(u.Z.error),b(!1),d.ZP.error(e.message))}))},movie:c,fetchMovie:function(e){R(u.Z.pending),b(!0),h(e).then((function(e){l(function(e){var t=e.release_date,r=e.title,n=e.poster_path,i=e.popularity,o=e.backdrop_path,a=e.id,s=e.tagline,c=e.genres,h=e.overview,u=t?t.split("-")[0]:"No release information",d=n?"https://image.tmdb.org/t/p/w500/".concat(n):"https://placehold.co/500x750/png",l=c.map((function(e){return e.name})).join(" ");return{date:u,title:r,tagline:s,id:a,poster:d,popularity:i+"",backdrop_path:o,genre:l.length?l:"No genre information",overview:h}}(e)),R(u.Z.resolved)})).catch((function(e){"canceled"!==e.message&&(R(u.Z.error),b(!1),d.ZP.error(e.message))}))},cast:f,fetchCast:function(e){R(u.Z.pending),b(!0),h(e).then((function(e){if(0===e.cast.length)return R(u.Z.resolved),b(!1),d.ZP.error("We don't have any cast for this movie");v(function(e){return e.map((function(e){var t=e.id,r=e.name,n=e.original_name,i=e.character,o=e.profile_path;return{id:t,name:r,original_name:n,character:i,profile:o?"https://image.tmdb.org/t/p/w500/".concat(o):"https://placehold.co/80x100/png"}}))}(e.cast)),R(u.Z.resolved)})).catch((function(e){"canceled"!==e.message&&(R(u.Z.error),b(!1),d.ZP.error(e.message))}))},reviews:Z,fetcReviews:function(e){R(u.Z.pending),b(!0),h(e).then((function(e){if(0===e.results.length)return b(!1),R(u.Z.resolved),d.ZP.error("We don't have any reviews for this movie");w(function(e){return e.map((function(e){var t=e.author,r=e.author_details.avatar_path;return{author:t,content:e.content,id:e.id,avatar:!r||null!==r&&void 0!==r&&r.includes("https")?"https://placehold.co/80x80/png":"https://image.tmdb.org/t/p/w500/".concat(r)}}))}(e.results)),R(u.Z.resolved)})).catch((function(e){"canceled"!==e.message&&(b(!1),R(u.Z.error),d.ZP.error(e.message))}))},contentIsLoading:_,setContentIsLoading:b,status:k,setStatus:R}}}}]);
//# sourceMappingURL=307.74173c83.chunk.js.map